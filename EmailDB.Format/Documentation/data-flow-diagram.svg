<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <!-- Background -->
  <rect width="800" height="600" fill="#f8f9fa" />
  
  <!-- Title -->
  <text x="400" y="30" font-family="Arial, sans-serif" font-size="20" text-anchor="middle" font-weight="bold">EmailDB Data Flow Diagram</text>
  
  <!-- Boxes for Components -->
  <!-- RawBlockManager -->
  <rect x="300" y="500" width="200" height="60" fill="#e3f2fd" stroke="#1565c0" stroke-width="2" rx="5" />
  <text x="400" y="535" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" font-weight="bold">RawBlockManager</text>
  
  <!-- CacheManager -->
  <rect x="300" y="410" width="200" height="60" fill="#e8f5e9" stroke="#2e7d32" stroke-width="2" rx="5" />
  <text x="400" y="445" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" font-weight="bold">CacheManager</text>
  
  <!-- MetadataManager -->
  <rect x="150" y="320" width="160" height="60" fill="#fff3e0" stroke="#e65100" stroke-width="2" rx="5" />
  <text x="230" y="355" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" font-weight="bold">MetadataManager</text>
  
  <!-- FolderManager -->
  <rect x="100" y="230" width="160" height="60" fill="#e1f5fe" stroke="#0277bd" stroke-width="2" rx="5" />
  <text x="180" y="265" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" font-weight="bold">FolderManager</text>
  
  <!-- SegmentManager -->
  <rect x="340" y="230" width="160" height="60" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" rx="5" />
  <text x="420" y="265" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" font-weight="bold">SegmentManager</text>
  
  <!-- EmailManager -->
  <rect x="200" y="140" width="200" height="60" fill="#ffebee" stroke="#c62828" stroke-width="2" rx="5" />
  <text x="300" y="175" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" font-weight="bold">EmailManager</text>
  
  <!-- Application -->
  <rect x="200" y="50" width="200" height="60" fill="#f5f5f5" stroke="#212121" stroke-width="2" rx="5" />
  <text x="300" y="85" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" font-weight="bold">Application</text>
  
  <!-- Storage -->
  <rect x="300" y="570" width="200" height="20" fill="#cfd8dc" stroke="#546e7a" stroke-width="2" rx="2" />
  <text x="400" y="584" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Storage File</text>
  
  <!-- Connecting Arrows -->
  <!-- App to EmailManager -->
  <line x1="300" y1="110" x2="300" y2="140" stroke="#757575" stroke-width="2" />
  <polygon points="300,140 295,130 305,130" fill="#757575" />
  
  <!-- EmailManager to FolderManager -->
  <line x1="250" y1="200" x2="200" y2="230" stroke="#0277bd" stroke-width="2" />
  <polygon points="200,230 198,220 208,223" fill="#0277bd" />
  
  <!-- EmailManager to SegmentManager -->
  <line x1="350" y1="200" x2="400" y2="230" stroke="#7b1fa2" stroke-width="2" />
  <polygon points="400,230 395,220 405,223" fill="#7b1fa2" />
  
  <!-- FolderManager to MetadataManager -->
  <line x1="180" y1="290" x2="210" y2="320" stroke="#e65100" stroke-width="2" />
  <polygon points="210,320 202,313 212,310" fill="#e65100" />
  
  <!-- SegmentManager to MetadataManager -->
  <line x1="380" y1="290" x2="270" y2="320" stroke="#e65100" stroke-width="2" />
  <polygon points="270,320 272,310 282,315" fill="#e65100" />
  
  <!-- MetadataManager to CacheManager -->
  <line x1="250" y1="380" x2="350" y2="410" stroke="#2e7d32" stroke-width="2" />
  <polygon points="350,410 340,406 345,400" fill="#2e7d32" />
  
  <!-- FolderManager to CacheManager -->
  <line x1="200" y1="290" x2="350" y2="410" stroke="#2e7d32" stroke-width="2" stroke-dasharray="5,3" />
  <polygon points="350,410 340,405 345,400" fill="#2e7d32" />
  
  <!-- SegmentManager to CacheManager -->
  <line x1="420" y1="290" x2="400" y2="410" stroke="#2e7d32" stroke-width="2" stroke-dasharray="5,3" />
  <polygon points="400,410 393,400 403,400" fill="#2e7d32" />
  
  <!-- CacheManager to RawBlockManager -->
  <line x1="400" y1="470" x2="400" y2="500" stroke="#1565c0" stroke-width="2" />
  <polygon points="400,500 395,490 405,490" fill="#1565c0" />
  
  <!-- RawBlockManager to Storage -->
  <line x1="400" y1="560" x2="400" y2="570" stroke="#546e7a" stroke-width="2" />
  <polygon points="400,570 395,560 405,560" fill="#546e7a" />
  
  <!-- Content Type Boxes on the Right -->
  <rect x="560" y="140" width="180" height="40" fill="#e3f2fd" stroke="#1565c0" stroke-width="1" rx="3" />
  <text x="650" y="165" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">EnhancedEmailContent</text>
  
  <rect x="560" y="190" width="180" height="40" fill="#e1f5fe" stroke="#0277bd" stroke-width="1" rx="3" />
  <text x="650" y="215" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">FolderContent</text>
  
  <rect x="560" y="240" width="180" height="40" fill="#e1f5fe" stroke="#0277bd" stroke-width="1" rx="3" />
  <text x="650" y="265" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">FolderTreeContent</text>
  
  <rect x="560" y="290" width="180" height="40" fill="#fff3e0" stroke="#e65100" stroke-width="1" rx="3" />
  <text x="650" y="315" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">MetadataContent</text>
  
  <rect x="560" y="340" width="180" height="40" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="1" rx="3" />
  <text x="650" y="365" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">SegmentContent</text>
  
  <rect x="560" y="390" width="180" height="40" fill="#fce4ec" stroke="#c2185b" stroke-width="1" rx="3" />
  <text x="650" y="415" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">WALContent</text>
  
  <!-- Content Type Legend -->
  <text x="650" y="110" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" font-weight="bold">Content Types</text>
  
  <!-- Legend -->
  <rect x="560" y="450" width="15" height="3" fill="none" stroke="#757575" stroke-width="2" />
  <text x="580" y="455" font-family="Arial, sans-serif" font-size="10" text-anchor="start">Direct Dependency</text>
  
  <rect x="560" y="470" width="15" height="3" fill="none" stroke="#757575" stroke-width="2" stroke-dasharray="5,3" />
  <text x="580" y="475" font-family="Arial, sans-serif" font-size="10" text-anchor="start">Indirect Dependency</text>
  
  <!-- Data flow labels -->
  <text x="520" y="440" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" font-style="italic" transform="rotate(-90 520,440)">Cache Layer</text>
  <text x="520" y="530" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" font-style="italic" transform="rotate(-90 520,530)">Storage Layer</text>
  <text x="100" y="320" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" font-style="italic" transform="rotate(-90 100,320)">Business Logic Layer</text>
  <text x="520" y="175" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" font-style="italic" transform="rotate(-90 520,175)">Application Layer</text>
</svg>